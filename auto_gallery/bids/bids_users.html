<!doctype html>
<html lang="en">

    <head>

		<!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <title>caravel</title>
        
        <!-- CSS -->
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500&display=swap">
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
        <link rel="stylesheet" href="../../_static/css/jquery.mCustomScrollbar.min.css">
        <link rel="stylesheet" href="../../_static/css/animate.css">
        <link rel="stylesheet" href="../../_static/css/style.css">
        <link rel="stylesheet" href="../../_static/css/jquery.mosaic.css">
        <link rel="stylesheet" href="../../_static/gallery.css">
        <link rel="stylesheet" href="../../_static/css/media-queries.css">
        <link rel="stylesheet" href="../../_static/css/pygment.css">

        <!-- Favicon and touch icons -->
        <link rel="shortcut icon" href="../../_static/ico/favicon.png">
        <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../../_static/ico/apple-touch-icon-144-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../../_static/ico/apple-touch-icon-114-precomposed.png">
        <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../../_static/ico/apple-touch-icon-72-precomposed.png">
        <link rel="apple-touch-icon-precomposed" href="../../_static/ico/apple-touch-icon-57-precomposed.png">

    </head>

    <body>

		<!-- Wrapper -->
    	<div class="wrapper">

			<!-- Sidebar -->
			<nav class="sidebar">
				
				<!-- close sidebar menu -->
				<div class="dismiss">
					<i class="fas fa-arrow-left"></i>
				</div>
				
				<div class="logo"">
					<h3><a href="../../index.html">Sidebar Menu</a></h3>
				</div>

                <!-- info setup -->
                    <p class="doc-version">
                        This documentation is for caravel <strong>version 1.0.0</strong>
                    </p>
                <p class="citing">
                    If you use the software, please do not hesitate to 
                    <a &mdash; <a href="https://github.com/neurospincloud-ci/pycaravel">
                    Report a Bug</a>.
                </p>
				
                <!-- links -->
                
                
                    
                
				<ul class="list-unstyled menu-elements">
					<li class="active">
						<a href="../../index.html"><i class="fas fa-home"></i> Home</a>
					</li>
					<li>
						<a href="../../generated/installation.html"><i class="fas fa-cog"></i> Installation</a>
					</li>
					<li>
						<a href="../index.html"><i class="fas fa-eye"></i> Gallery</a>
					</li>
					<li>
						<a href="../../generated/documentation.html"><i class="fas fa-pencil-alt"></i> API documentation</a>
					</li>
					<li>
						<a href="../../generated/search.html"><i class="fas fa-search"></i> Search</a>
					</li>
					<li>
						<a href="http://joliot.cea.fr/drf/joliot/Pages/Entites_de_recherche/NeuroSpin.aspx"><i class="fas fa-external-link-alt"></i> NeuroSpin webPage</a>
					</li>
					<li>
						<a href="#otherSections" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle" role="button" aria-controls="otherSections">
							<i class="fas fa-sync"></i>Sections Shortcuts
						</a>
						<ul class="collapse list-unstyled" id="otherSections">
                            
                            
                                
                                
                                    
                                        
                                        
                                        
                                    
                                        
                                        
                                        
                                    
                                        
                                        
                                        
                                            
                                            
                                    
                                
                                    
                                        
                                        
                                        
                                    
                                        
                                        
                                        
                                            
                                            
                                    
                                
                                    
                                        
                                        
                                        
                                    
                                        
                                        
                                        
                                            
                                            
                                    
                                
                                    
                                        
                                        
                                        
                                    
                                        
                                        
                                        
                                            
                                            
                                    
                                
                                    
                                        
                                        
                                        
                                    
                                
                                    
                                        
                                        
                                        
                                    
                                
                                
                                    <li>SECTIONS</li>
                                    
						                <li> <a href='#first-checks'>First Checks</a> </li>                                    
                                    
						                <li> <a href='#create-a-parser-for-your-project'>Create A Parser For Your Project</a> </li>                                    
                                    
						                <li> <a href='#and-for-the-derivatives'>And For The Derivatives</a> </li>                                    
                                    
						                <li> <a href='#and-for-the-clinical-data'>And For The Clinical Data</a> </li>                                    
                                    
                                
                            
                            <li>API</li>
                            <li><a href="../../generated/caravel.html">caravel</a></li><li><a href="../../generated/caravel.loaders.html">caravel.loaders</a></li><li><a href="../../generated/caravel.nextcloud.html">caravel.nextcloud</a></li><li><a href="../../generated/caravel.nextcloud.api_wrappers.html">caravel.nextcloud.api_wrappers</a></li><li><a href="../../generated/caravel.parsers.html">caravel.parsers</a></li>
						</ul>
					</li>
				</ul>
				
                <!-- go top page -->
				<div class="to-top">
					<a class="btn btn-primary btn-customized-3" href="#" role="button">
	                    <i class="fas fa-arrow-up"></i> Top
	                </a>
				</div>
			
                <!-- change color -->
				<div class="dark-light-buttons">
					<a class="btn btn-primary btn-customized-4 btn-customized-dark" href="#" role="button">Dark</a>
					<a class="btn btn-primary btn-customized-4 btn-customized-light" href="#" role="button">Light</a>
				</div>
			
			</nav>
			<!-- End sidebar -->
			
			<!-- Dark overlay -->
    		<div class="overlay"></div>

			<!-- Content -->
			<div class="content">
			
				<!-- open sidebar menu -->
				<a class="btn btn-primary btn-customized open-menu" href="#" role="button">
                    <i class="fas fa-align-left"></i> <span>Menu</span>
                </a>

		        <!-- Top content -->
		        <div class="top-content section-container" id="top-content">
			        <div class="container">
			            <div class="row">
                            <div class="col-md-3 section-5-box banner-logo">
                                <img alt="Logo" src="../../_static/caravel.png">
                            </div>
			                <div class="col-md-7 section-5-box">
			                	<h1 class="wow fadeIn">    <p>pycaravel:  This module is designed to simplify continuous integration (CI) of
    data from multiple projects.</p></h1>
			                </div>
			            </div>
			        </div>
		        </div>
                    
                    <div class="document">
                        <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-auto-gallery-bids-bids-users-py"><span class="std std-ref">here</span></a>
to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="bids-directory-parsing-user-mode">
<span id="sphx-glr-auto-gallery-bids-bids-users-py"></span><h1>BIDS directory parsing (user mode)<a class="headerlink" href="#bids-directory-parsing-user-mode" title="Permalink to this headline">¶</a></h1><div class='divider-1 wow fadeInUp'><span></span></div>
<p>Credit: A Grigis</p>
<p>pycaravel is a Python package that enables you to parse various source of data.
In this tutorial you will learn how to parse and search in a BIDS directory.</p>
<div class="section" id="first-checks">
<h2>First checks<a class="headerlink" href="#first-checks" title="Permalink to this headline">¶</a><i class='fas fa-angle-right'></i></h2>
<p>In order to test if pycaravel package is installed on your machine, you can
check the package version.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">caravel</span>

<span class="nb">print</span><span class="p">(</span><span class="n">caravel</span><span class="o">.</span><span class="n">__version__</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><a href="../../generated/caravel.info.html#caravel.info" title="caravel.info" class="sphx-glr-backref-module-caravel sphx-glr-backref-type-py-function"><span class="n">caravel</span><span class="o">.</span><span class="n">info</span></a><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="section" id="create-a-parser-for-your-project">
<h2>Create a parser for your project<a class="headerlink" href="#create-a-parser-for-your-project" title="Permalink to this headline">¶</a><i class='fas fa-angle-right'></i></h2>
<p>The package provides a common interface to parse a BIDS directory. The
parsing rules are defined by projects in the module, so we will beed to
specify the project name you are working on. For the moement it is not
possible to specify these rules via the API.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cwdir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">realpath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>
<span class="n">parser</span> <span class="o">=</span> <a href="../../generated/caravel.get_parser.html#caravel.get_parser" title="caravel.get_parser" class="sphx-glr-backref-module-caravel sphx-glr-backref-type-py-function"><span class="n">caravel</span><span class="o">.</span><span class="n">get_parser</span></a><span class="p">(</span>
    <span class="n">project</span><span class="o">=</span><span class="s2">&quot;hbn&quot;</span><span class="p">,</span> <span class="n">confdir</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cwdir</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">pardir</span><span class="p">,</span> <span class="s2">&quot;conf&quot;</span><span class="p">),</span>
    <span class="n">layoutdir</span><span class="o">=</span><span class="n">cwdir</span><span class="p">)</span>
</pre></div>
</div>
<p>You can now list the available configurations for your project, and the
available layout representations pre-generated. Note that these
representations are sorted by dates, and that the latest one will be used.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>

<span class="n">pprint</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">conf</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">representation</span><span class="p">)</span>
</pre></div>
</div>
<p>You can export the whole ‘sourcedata’ layout in a pandas DataFrame.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">export_layout</span><span class="p">(</span><span class="s2">&quot;sourcedata&quot;</span><span class="p">))</span>
</pre></div>
</div>
<p>It is also possible to filter this dataset. You need first to list all the
avaliable filtering keys, then list all the availables values for the
filtering key(s) of interest, and finally filter your dataset.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">list_keys</span><span class="p">(</span><span class="s2">&quot;sourcedata&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">list_values</span><span class="p">(</span><span class="s2">&quot;sourcedata&quot;</span><span class="p">,</span> <span class="s2">&quot;subject&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">list_values</span><span class="p">(</span><span class="s2">&quot;sourcedata&quot;</span><span class="p">,</span> <span class="s2">&quot;modality&quot;</span><span class="p">))</span>
<span class="n">search1</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">filter_layout</span><span class="p">(</span><span class="s2">&quot;sourcedata&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="s2">&quot;NDARLU606ZDD&quot;</span><span class="p">,</span>
                               <span class="n">modality</span><span class="o">=</span><span class="s2">&quot;anat|func&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">search1</span><span class="p">)</span>
<span class="n">search2</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">filter_layout</span><span class="p">(</span><span class="s2">&quot;sourcedata&quot;</span><span class="p">,</span> <span class="n">extension</span><span class="o">=</span><span class="s2">&quot;tsv&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">search2</span><span class="p">)</span>
</pre></div>
</div>
<p>Finally you may want to ask the system to load the filtered data. Only a
couple of file extensions are supported. If no loader has been found the
filename is returned</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="ow">not</span> <span class="n">search1</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
    <span class="n">data1</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span><span class="s2">&quot;sourcedata&quot;</span><span class="p">,</span> <span class="n">search1</span><span class="p">)</span>
    <span class="n">pprint</span><span class="p">(</span><span class="n">data1</span><span class="p">)</span>
<span class="k">if</span> <span class="ow">not</span> <span class="n">search2</span><span class="o">.</span><span class="n">empty</span><span class="p">:</span>
    <span class="n">data2</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span><span class="s2">&quot;sourcedata&quot;</span><span class="p">,</span> <span class="n">search2</span><span class="p">)</span>
    <span class="n">pprint</span><span class="p">(</span><span class="n">data2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="and-for-the-derivatives">
<h2>And for the derivatives<a class="headerlink" href="#and-for-the-derivatives" title="Permalink to this headline">¶</a><i class='fas fa-angle-right'></i></h2>
<p>We can do the same for the derivatives</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">export_layout</span><span class="p">(</span><span class="s2">&quot;derivatives&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">list_keys</span><span class="p">(</span><span class="s2">&quot;derivatives&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">list_values</span><span class="p">(</span><span class="s2">&quot;derivatives&quot;</span><span class="p">,</span> <span class="s2">&quot;process&quot;</span><span class="p">))</span>
<span class="n">search3</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">filter_layout</span><span class="p">(</span><span class="s2">&quot;derivatives&quot;</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="s2">&quot;NDARAE199TDD&quot;</span><span class="p">,</span>
                               <span class="n">process</span><span class="o">=</span><span class="s2">&quot;scalars&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">search3</span><span class="p">)</span>
<span class="n">data3</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span><span class="s2">&quot;derivatives&quot;</span><span class="p">,</span> <span class="n">search3</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">data3</span><span class="p">)</span>
<span class="n">search3bis</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">filter_layout</span><span class="p">(</span><span class="s2">&quot;derivatives&quot;</span><span class="p">,</span> <span class="n">process</span><span class="o">=</span><span class="s2">&quot;tbss_stats&quot;</span><span class="p">,</span>
                                  <span class="n">extension</span><span class="o">=</span><span class="s2">&quot;tsv&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">search3bis</span><span class="p">)</span>
<span class="n">data3bis</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span><span class="s2">&quot;derivatives&quot;</span><span class="p">,</span> <span class="n">search3bis</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">data3bis</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="and-for-the-clinical-data">
<h2>And for the clinical data<a class="headerlink" href="#and-for-the-clinical-data" title="Permalink to this headline">¶</a><i class='fas fa-angle-right'></i></h2>
<p>We can do the same for the clinical data denoted in BIDS phenotype</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">parser</span><span class="o">.</span><span class="n">export_layout</span><span class="p">(</span><span class="s2">&quot;phenotype&quot;</span><span class="p">))</span>
<span class="n">search4</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">filter_layout</span><span class="p">(</span><span class="s2">&quot;phenotype&quot;</span><span class="p">,</span> <span class="n">extension</span><span class="o">=</span><span class="s2">&quot;tsv&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">search4</span><span class="p">)</span>
<span class="n">data4</span> <span class="o">=</span> <span class="n">parser</span><span class="o">.</span><span class="n">load_data</span><span class="p">(</span><span class="s2">&quot;phenotype&quot;</span><span class="p">,</span> <span class="n">search4</span><span class="p">)</span>
<span class="n">pprint</span><span class="p">(</span><span class="n">data4</span><span class="p">)</span>
</pre></div>
</div>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  0.000 seconds)</p>
<p><strong>Estimated memory usage:</strong>  0 MB</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-auto-gallery-bids-bids-users-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/f95db43320accb66ad8485df55fba9f7/bids_users.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">bids_users.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../_downloads/76325e7b5f7c7110f3b0fd858029870f/bids_users.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">bids_users.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>
</div>

                    </div>
                <div class="spacer"></div>
		        
		        <!-- Footer -->
		        <div class="section-6-container section-container section-container-image-bg" id="section-6">
			        <div class="container">
			            <div class="row">
		                    <div class="col-md-5 offset-md-1 section-6-box wow fadeInDown">
                                <div class="section-6-title">
		                    	    <p>Follow us</p>
                                </div>
		                    	<div class="section-6-social">
			                    	<a href="https://www.facebook.com/pages/NeuroSpin/171075046414933"><i class="fab fa-facebook-f"></i></a>
									<a href="https://www.youtube.com/CEASaclay"><i class="fab fa-youtube"></i></a>
									<a href="https://twitter.com/neurospin_91"><i class="fab fa-twitter"></i></a>
									<a href="https://github.com/AGrigis/pysphinxdoc"><i class="fab fa-github"></i></a>
                                    <p>&copy; 2024, 
Antoine Grigis <antoine.grigis@cea.fr>
 <antoine.grigis@cea.fr></p>
		                    	</div>
		                    </div>
			            </div>
			        </div>
                </div>
	        
	        </div>
	        <!-- End content -->
        
        </div>
        <!-- End wrapper -->

        <!-- Javascript -->
		<script src="../../_static/js/jquery-3.3.1.min.js"></script>
		<script src="../../_static/js/jquery-migrate-3.0.0.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
        <script src="../../_static/js/jquery.backstretch.min.js"></script>
        <script src="../../_static/js/wow.min.js"></script>
        <script src="../../_static/js/jquery.waypoints.min.js"></script>
        <script src="../../_static/js/jquery.mCustomScrollbar.concat.min.js"></script>
        <script src="../../_static/js/scripts.js"></script>
        <script src="../../_static/js/jquery.mosaic.js"></script>
        <script src="../../_static/js/search.js"></script>
        <script type="text/javascript">
	        $('.top-content').backstretch("../../_static/img/backgrounds/banner1.png");
            $('.section-6-container').backstretch("../../_static/img/backgrounds/footer1.png");
        </script>

    </body>

</html>