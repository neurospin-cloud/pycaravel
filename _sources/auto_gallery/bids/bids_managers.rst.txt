
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_gallery/bids/bids_managers.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_auto_gallery_bids_bids_managers.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_gallery_bids_bids_managers.py:


BIDS directory parsing (manager mode)
=====================================

Credit: A Grigis

pycaravel is a Python package that enables you to parse various source of data.
In this tutorial you will learn how to parse and search a BIDS directory, and
then create a representation of this parser. Using the described representation
will speed up the search for users.

First checks
------------

In order to test if pycaravel package is installed on your machine, you can
check the package version.

.. GENERATED FROM PYTHON SOURCE LINES 18-23

.. code-block:: default


    import caravel

    print(caravel.__version__)


.. GENERATED FROM PYTHON SOURCE LINES 24-26

Now you can run the the configuration info function to see if all the
dependencies are installed properly:

.. GENERATED FROM PYTHON SOURCE LINES 26-29

.. code-block:: default


    print(caravel.info())


.. GENERATED FROM PYTHON SOURCE LINES 30-38

Create a parser for your project
--------------------------------

The package provides a common interface to parse a BIDS directory. The
parsing rules are defined by projects in the module, so we will beed to
specify the project name you are working on. For the moment it is not
possible to specify these rules via the API. Set the layoutdir to None
in order to switch to the managers mode.

.. GENERATED FROM PYTHON SOURCE LINES 38-41

.. code-block:: default


    parser = caravel.get_parser(project="hbn", layoutdir=None)


.. GENERATED FROM PYTHON SOURCE LINES 42-51

Create representation of your BIDS directory
--------------------------------------------

You will now parse your BIDS directory. As this step may be time consuming,
the managers are in charge of creating a representation of the final
parser that will be used during the user search steps. This can be done by
using the following function, specifying the BIDS root directory and
the subfolder name to be parsed (sourcedata, derivatives, phenotype, ...).
This name must have a conresponding configuration file.

.. GENERATED FROM PYTHON SOURCE LINES 51-70

.. code-block:: default


    parser.pickling_layout(
        bids_root="/neurospin/psy/hbn",
        name="sourcedata",
        outdir="/neurospin/tmp/pycaravel/layout")
    print(parser.list_keys("sourcedata"))
    parser.pickling_layout(
        bids_root="/neurospin/psy/hbn/",
        name="derivatives",
        subset=["tbss_stats", "scalars"],
        outdir="/neurospin/tmp/pycaravel/layout")
    print(parser.list_keys("derivatives"))
    parser.pickling_layout(
        bids_root="/neurospin/psy/hbn",
        name="phenotype",
        outdir="/neurospin/tmp/pycaravel/layout")
    print(parser.list_keys("phenotype"))




.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  0.000 seconds)

**Estimated memory usage:**  0 MB


.. _sphx_glr_download_auto_gallery_bids_bids_managers.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: bids_managers.py <bids_managers.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: bids_managers.ipynb <bids_managers.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
